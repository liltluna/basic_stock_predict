<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Crypto Template & Dashboard</title>
    <meta content="" name="description">
    <meta content="" name="author">

    <!-- Favicon -->
    <link rel="shortcut icon" href="static/picture/favicon.png" type="image/x-icon">

    <!-- CORE CSS FRAMEWORK - START -->
    <link href="static/css/pace-theme-flash.css" rel="stylesheet" type="text/css" media="screen">
    <link href="static/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="static/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
    <link href="static/css/font-awesome.css" rel="stylesheet" type="text/css">
    <link href="static/css/cryptocoins.css" rel="stylesheet" type="text/css">
    <link href="static/css/cryptocoins.css" rel="stylesheet" type="text/css">
    <link href="static/css/animate.min.css" rel="stylesheet" type="text/css">
    <link href="static/css/perfect-scrollbar.css" rel="stylesheet" type="text/css">
    <!-- CORE CSS FRAMEWORK - END -->

    <!-- HEADER SCRIPTS INCLUDED ON THIS PAGE - START -->
    <link href="static/css/jqcandlestick.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/static/assets/css/bootstrap.min.css" />
    <!-- HEADER SCRIPTS INCLUDED ON THIS PAGE - END -->

    <!-- CORE CSS TEMPLATE - START -->
    <link href="static/css/style.css" rel="stylesheet" type="text/css">
    <!-- CORE CSS TEMPLATE - END -->
    <script src="/static/js/echarts.js"></script>
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.bundle.min.js"></script>



</head>
<!-- END HEAD -->

<!-- BEGIN BODY -->

<body class=" ">
    <!-- START TOPBAR -->
    <div class='page-topbar gradient-blue1'>
        <div class='logo-area crypto'>
        </div>
        <div class='quick-area'>
            <div class='pull-left'>
                <ul class="info-menu left-links list-inline list-unstyled">
                    <li class="sidebar-toggle-wrap">
                        <a href="#" data-toggle="sidebar" class="sidebar_toggle">
                            <i class="fa fa-bars"></i>
                        </a>
                    </li>
                    <li class="topnav-item active item2">
                        <a href="#" class="nav-link w-text">
                            <i class="fa fa-area-chart mr-10"></i>Reports
                        </a>
                    </li>

                    <li class="hidden-sm hidden-xs searchform">
                        <form action="#" method="post">
                            <div class="input-group">
                                <span class="input-group-addon">
                                    <i class="fa fa-search"></i>
                                </span>
                                <input type="text" class="form-control animated fadeIn" placeholder="Search & Enter">
                            </div>
                            <input type='submit' value="">
                        </form>
                    </li>

                </ul>
            </div>

        </div>

    </div>
    <!-- END TOPBAR -->


    <!-- START CONTAINER -->
    <div class="page-container row-fluid container-fluid">
        <!-- SIDEBAR - START -->

        <div class="page-sidebar fixedscroll">

            <!-- MAIN MENU - START -->
            <div class="page-sidebar-wrapper crypto" id="main-menu-wrapper">

                <ul class='wraplist'>
                    <li class='menusection'>Main</li>

                    <li class="open">
                        <a href="/">
                            <i class="img">
                                <img src="static/picture/4.png" alt="" class="width-20">
                            </i>
                            <span class="title">Index</span>
                            <span class="label label-accent">HOT</span>
                        </a>
                    </li>

                    <li class='menusection'>Data Visualization</li>
                    <li class="">
                        <a href="javascript:;">
                            <i class="img">
                                <img src="static/picture/16.png" alt="" class="width-20">
                            </i>
                            <span class="title">Details</span>
                            <span class="arrow "></span>
                        </a>
                        <ul class="sub-menu">
                            <li>
                                <a class="" href="/basicstock">Stock List</a>
                            </li>
                            <li>
                                <a class="" href="/charts-echart-bar">Bar & Stacked Charts</a>
                            </li>
                        </ul>
                    </li>
                </ul>

            </div>
            <!-- MAIN MENU - END -->

        </div>
        <!--  SIDEBAR - END -->

        <!-- START CONTENT -->
        <section id="main-content" class="">
            <div class="wrapper main-wrapper row">

                <div class="col-xs-12">
                    <div class="page-title">

                        <div class="pull-left">
                            <!-- PAGE HEADING TAG - START -->
                            <h1 class="title"><strong>ZRETC PROJRCT</strong></h1>
                            <!-- PAGE HEADING TAG - END -->
                        </div>

                        <div class="pull-right hidden-xs">
                            <ol class="breadcrumb">
                                <li>
                                    <a href="/"><i class="fa fa-home"></i>Home</a>
                                </li>
                                <li>
                                    <a href="https://120.46.139.194/"><i></i>ZRETC</a>
                                </li>
                            </ol>
                        </div>

                    </div>
                </div>
                <div class="clearfix"></div>

                <!-- MAIN CONTENT AREA STARTS -->
                <div class="clearfix"></div>

                <section class="box ">
                    <div class="content-body">
                        <div class="row">
                            <div class="col-xs-12">
                                <div id="pachart" style="height: 400px"></div>

                                <script>
                                    function getParameterByName(name, url) {
                                        if (!url) url = window.location.href;
                                        name = name.replace(/[\[\]]/g, "\\$&");
                                        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                                            results = regex.exec(url);
                                        if (!results) return null;
                                        if (!results[2]) return '';
                                        return decodeURIComponent(results[2].replace(/\+/g, " "));
                                    }

                                    // 获取传递的 symbol 参数
                                    var symbol = getParameterByName('symbol');
                                    var name = getParameterByName('name');
                                    var stockdata
                                    var data_src

                                    $.ajax({
                                        url: '/specificdata',
                                        method: 'post',
                                        data: { symbol },
                                        dataType: 'json',
                                        success: function (stockData) {
                                            stockdata = stockData;
                                            var chartDom = document.getElementById('pachart');
                                            var myChart = echarts.init(chartDom);
                                            var option;


                                            const upColor = '#ec0000';
                                            const upBorderColor = '#8A0000';
                                            const downColor = '#00da3c';
                                            const downBorderColor = '#008F28';
                                            // Each item: open，close，lowest，highest
                                            const data0 = splitData(stockData);
                                            data_src = data0;
                                            function splitData(rawData) {
                                                const categoryData = [];
                                                const values = [];
                                                for (var i = 0; i < rawData.length; i++) {
                                                    categoryData.push(rawData[i].splice(0, 1)[0]);
                                                    values.push(rawData[i]);
                                                }
                                                return {
                                                    categoryData: categoryData,
                                                    values: values
                                                };
                                            }
                                            function calculateMA(dayCount) {
                                                var result = [];
                                                for (var i = 0, len = data0.values.length; i < len; i++) {
                                                    if (i < dayCount) {
                                                        result.push('-');
                                                        continue;
                                                    }
                                                    var sum = 0;
                                                    for (var j = 0; j < dayCount; j++) {
                                                        sum += +data0.values[i - j][1];
                                                    }
                                                    result.push(sum / dayCount);
                                                }
                                                return result;
                                            }
                                            option = {
                                                title: {
                                                    text: name + '上证指数',
                                                    left: 0
                                                },
                                                tooltip: {
                                                    trigger: 'axis',
                                                    axisPointer: {
                                                        type: 'cross'
                                                    }
                                                },
                                                legend: {
                                                    data: ['日K', 'MA5', 'MA10', 'MA20', 'MA30']
                                                },
                                                grid: {
                                                    left: '10%',
                                                    right: '10%',
                                                    bottom: '15%'
                                                },
                                                xAxis: {
                                                    type: 'category',
                                                    data: data0.categoryData,
                                                    boundaryGap: false,
                                                    axisLine: { onZero: false },
                                                    splitLine: { show: false },
                                                    min: 'dataMin',
                                                    max: 'dataMax'
                                                },
                                                yAxis: {
                                                    scale: true,
                                                    splitArea: {
                                                        show: true
                                                    }
                                                },
                                                dataZoom: [
                                                    {
                                                        type: 'inside',
                                                        start: 90,
                                                        end: 100
                                                    },
                                                    {
                                                        show: true,
                                                        type: 'slider',
                                                        top: '90%',
                                                        start: 90,
                                                        end: 100
                                                    }
                                                ],
                                                series: [
                                                    {
                                                        name: '日K',
                                                        type: 'candlestick',
                                                        data: data0.values,
                                                        itemStyle: {
                                                            color: upColor,
                                                            color0: downColor,
                                                            borderColor: upBorderColor,
                                                            borderColor0: downBorderColor
                                                        },
                                                        markPoint: {
                                                            label: {
                                                                formatter: function (param) {
                                                                    return param != null ? Math.round(param.value) + '' : '';
                                                                }
                                                            },
                                                            data: [
                                                                {
                                                                    name: 'Mark',
                                                                    coord: ['2013/5/31', 2300],
                                                                    value: 2300,
                                                                    itemStyle: {
                                                                        color: 'rgb(41,60,85)'
                                                                    }
                                                                },
                                                                {
                                                                    name: 'highest value',
                                                                    type: 'max',
                                                                    valueDim: 'highest'
                                                                },
                                                                {
                                                                    name: 'lowest value',
                                                                    type: 'min',
                                                                    valueDim: 'lowest'
                                                                },
                                                                {
                                                                    name: 'average value on close',
                                                                    type: 'average',
                                                                    valueDim: 'close'
                                                                }
                                                            ],
                                                            tooltip: {
                                                                formatter: function (param) {
                                                                    return param.name + '<br>' + (param.data.coord || '');
                                                                }
                                                            }
                                                        },
                                                        markLine: {
                                                            symbol: ['none', 'none'],
                                                            data: [
                                                                [
                                                                    {
                                                                        name: 'from lowest to highest',
                                                                        type: 'min',
                                                                        valueDim: 'lowest',
                                                                        symbol: 'circle',
                                                                        symbolSize: 10,
                                                                        label: {
                                                                            show: false
                                                                        },
                                                                        emphasis: {
                                                                            label: {
                                                                                show: false
                                                                            }
                                                                        }
                                                                    },
                                                                    {
                                                                        type: 'max',
                                                                        valueDim: 'highest',
                                                                        symbol: 'circle',
                                                                        symbolSize: 10,
                                                                        label: {
                                                                            show: false
                                                                        },
                                                                        emphasis: {
                                                                            label: {
                                                                                show: false
                                                                            }
                                                                        }
                                                                    }
                                                                ],
                                                                {
                                                                    name: 'min line on close',
                                                                    type: 'min',
                                                                    valueDim: 'close'
                                                                },
                                                                {
                                                                    name: 'max line on close',
                                                                    type: 'max',
                                                                    valueDim: 'close'
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        name: 'MA5',
                                                        type: 'line',
                                                        data: calculateMA(5),
                                                        smooth: true,
                                                        lineStyle: {
                                                            opacity: 0.5
                                                        }
                                                    },
                                                    {
                                                        name: 'MA10',
                                                        type: 'line',
                                                        data: calculateMA(10),
                                                        smooth: true,
                                                        lineStyle: {
                                                            opacity: 0.5
                                                        }
                                                    },
                                                    {
                                                        name: 'MA20',
                                                        type: 'line',
                                                        data: calculateMA(20),
                                                        smooth: true,
                                                        lineStyle: {
                                                            opacity: 0.5
                                                        }
                                                    },
                                                    {
                                                        name: 'MA30',
                                                        type: 'line',
                                                        data: calculateMA(30),
                                                        smooth: true,
                                                        lineStyle: {
                                                            opacity: 0.5
                                                        }
                                                    }
                                                ]
                                            };

                                            option && myChart.setOption(option);

                                        }
                                    });
                                </script>
                            </div>
                        </div>
                    </div>
                </section>
                <div class="clearfix"></div>

                <section class="box ">
                    <div class="content-body">
                        <div class="row">
                            <div class="col-xs-12">
                                <div id="prechart" style="height: 400px"></div>
                                <script>
                                    function getParameterByName(name, url) {
                                        if (!url) url = window.location.href;
                                        name = name.replace(/[\[\]]/g, "\\$&");
                                        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                                            results = regex.exec(url);
                                        if (!results) return null;
                                        if (!results[2]) return '';
                                        return decodeURIComponent(results[2].replace(/\+/g, " "));
                                    }

                                    // 获取传递的 symbol 参数
                                    var symbol = getParameterByName('symbol');
                                    $.ajax({
                                        url: '/predicteddata',
                                        method: 'post',
                                        data: { symbol },
                                        dataType: 'json',
                                        success: function (pData) {
                                            var chartDom = document.getElementById('prechart');
                                            var myChart = echarts.init(chartDom);
                                            var option;
                                            stockdata = pData.trade_date
                                            predata = pData.pre
                                            const data0 = splitData(stockdata);
                                            function splitData(rawData) {
                                                const categoryData = [];
                                                const values = [];
                                                for (var i = 0; i < rawData.length; i++) {
                                                    categoryData.push(rawData[i].splice(0, 1)[0]);
                                                    values.push(rawData[i]);
                                                }
                                                return {
                                                    categoryData: categoryData,
                                                    values: values
                                                };
                                            }

                                            function alignSeriesData(realData, preData) {
                                                // 确保 realData 和 preData 有相同的长度
                                                if (realData.length > preData.length) {
                                                    preData = Array(realData.length - preData.length).fill(null).concat(preData);
                                                } else if (preData.length > realData.length) {
                                                    realData = Array(preData.length - realData.length).fill(null).concat(realData);
                                                }

                                                return preData;
                                            }
                                            option = {
                                                title: {
                                                    text: name + '价格预测',
                                                    left: 0
                                                },
                                                tooltip: {
                                                    trigger: 'axis',
                                                    axisPointer: {
                                                        type: 'cross'
                                                    }
                                                },
                                                grid: {
                                                    left: '10%',
                                                    right: '10%',
                                                    bottom: '15%'
                                                },
                                                legend: {
                                                    data: ['real', 'pre']
                                                },
                                                xAxis: {
                                                    type: 'category',
                                                    data: data0.categoryData.reverse(),
                                                    boundaryGap: false,
                                                    axisLine: { onZero: false },
                                                    splitLine: { show: false },
                                                    min: 'dataMin',
                                                    max: 'dataMax'
                                                },
                                                yAxis: {
                                                    scale: true,
                                                    splitArea: {
                                                        show: true
                                                    }
                                                },
                                                dataZoom: [
                                                    {
                                                        type: 'inside',
                                                        start: 75,
                                                        end: 100
                                                    },
                                                    {
                                                        show: true,
                                                        type: 'slider',
                                                        top: '90%',
                                                        start: 75,
                                                        end: 100
                                                    }
                                                ],
                                                series: [
                                                    {
                                                        name: 'real',
                                                        type: 'line',
                                                        data: stockdata.map(item => item[0]).reverse() // Assuming the third column of stockdata is the predicted data
                                                    },
                                                    {
                                                        name: 'pre',
                                                        type: 'line',
                                                        data: alignSeriesData(stockdata.map(item => item[1]), predata.map(item => item[1]))
                                                    }
                                                ]
                                            };

                                            option && myChart.setOption(option);
                                        }
                                    });
                                </script>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- MAIN CONTENT AREA ENDS -->
            </div>
        </section>
        <!-- END CONTENT -->
        <div class="page-chatapi hideit">



            <div class="chat-wrapper">

                <h4 class="group-head">Favourites</h4>
                <ul class="contact-list">

                    <li class="user-row " id='chat_user_1' data-user-id='1'>
                        <div class="user-img">
                            <a href="#"><img src="static/picture/avatar-1.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Joge Lucky</a></h4>
                            <span class="status available" data-status="available"> Available</span>
                        </div>
                        <div class="user-status available">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row " id='chat_user_2' data-user-id='2'>
                        <div class="user-img">
                            <a href="#"><img src="static/picture/avatar-2.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Folisise Chosiel</a></h4>
                            <span class="status away" data-status="away"> Away</span>
                        </div>
                        <div class="user-status away">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row " id='chat_user_3' data-user-id='3'>
                        <div class="user-img">
                            <a href="#"><img src="static/picture/avatar-3.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Aron Gonzalez</a></h4>
                            <span class="status busy" data-status="busy"> Busy</span>
                        </div>
                        <div class="user-status busy">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>

                </ul>

                <h4 class="group-head">More Contacts</h4>
                <ul class="contact-list">

                    <li class="user-row " id='chat_user_4' data-user-id='4'>
                        <div class="user-img">
                            <a href="#"><img src="static/picture/avatar-4.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Chris Fox</a></h4>
                            <span class="status offline" data-status="offline"> Offline</span>
                        </div>
                        <div class="user-status offline">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row " id='chat_user_5' data-user-id='5'>
                        <div class="user-img">
                            <a href="#"><img src="static/picture/avatar-5.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Mogen Polish</a></h4>
                            <span class="status offline" data-status="offline"> Offline</span>
                        </div>
                        <div class="user-status offline">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row " id='chat_user_6' data-user-id='6'>
                        <div class="user-img">
                            <a href="#"><img src="static/picture/avatar-1.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Smith Carter</a></h4>
                            <span class="status available" data-status="available"> Available</span>
                        </div>
                        <div class="user-status available">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row " id='chat_user_7' data-user-id='7'>
                        <div class="user-img">
                            <a href="#"><img src="static/picture/avatar-2.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Amilia Gozenal</a></h4>
                            <span class="status busy" data-status="busy"> Busy</span>
                        </div>
                        <div class="user-status busy">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row " id='chat_user_8' data-user-id='8'>
                        <div class="user-img">
                            <a href="#"><img src="static/picture/avatar-3.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Tahir Jemyship</a></h4>
                            <span class="status away" data-status="away"> Away</span>
                        </div>
                        <div class="user-status away">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row " id='chat_user_9' data-user-id='9'>
                        <div class="user-img">
                            <a href="#"><img src="static/picture/avatar-4.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Johanson Wright</a></h4>
                            <span class="status busy" data-status="busy"> Busy</span>
                        </div>
                        <div class="user-status busy">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row " id='chat_user_10' data-user-id='10'>
                        <div class="user-img">
                            <a href="#"><img src="static/picture/avatar-5.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Loni Tindall</a></h4>
                            <span class="status away" data-status="away"> Away</span>
                        </div>
                        <div class="user-status away">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row " id='chat_user_11' data-user-id='11'>
                        <div class="user-img">
                            <a href="#"><img src="static/picture/avatar-1.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Natcho Herlaey</a></h4>
                            <span class="status idle" data-status="idle"> Idle</span>
                        </div>
                        <div class="user-status idle">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>
                    <li class="user-row " id='chat_user_12' data-user-id='12'>
                        <div class="user-img">
                            <a href="#"><img src="static/picture/avatar-2.png" alt=""></a>
                        </div>
                        <div class="user-info">
                            <h4><a href="#">Shakira Swedan</a></h4>
                            <span class="status idle" data-status="idle"> Idle</span>
                        </div>
                        <div class="user-status idle">
                            <i class="fa fa-circle"></i>
                        </div>
                    </li>

                </ul>
            </div>

        </div>

        <div class="chatapi-windows ">

        </div>
    </div>
    <!-- END CONTAINER -->
    <!-- LOAD FILES AT PAGE END FOR FASTER LOADING -->

    <!-- CORE JS FRAMEWORK - START -->
    <script src="static/js/jquery-1.11.2.min.js"></script>
    <script src="static/js/jquery.easing.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/js/pace.min.js"></script>
    <script src="static/js/perfect-scrollbar.min.js"></script>
    <script src="static/js/viewportchecker.js"></script>
    <script>
        window.jQuery || document.write('<script src="static/js/jquery-1.11.2.min.js"><\/script>');
    </script>
    <!-- CORE JS FRAMEWORK - END -->

    <!-- OTHER SCRIPTS INCLUDED ON THIS PAGE - START -->

    <script src="static/js/Chart.min.js"></script>
    <script src="static/js/jquery.syotimer.min.js"></script>
    <script src="static/js/syotimer-ini.js"></script>
    <script src="static/js/dashboard-crypto.js"></script>
    <!-- OTHER SCRIPTS INCLUDED ON THIS PAGE - END -->


    <!-- CORE TEMPLATE JS - START -->
    <script src="static/js/scripts.js"></script>
    <!-- END CORE TEMPLATE JS - END -->

</body>

</html>