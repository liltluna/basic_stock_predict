(function(a){a.fn.viewportChecker=function(e){var c={classToAdd:"visible",classToRemove:"invisible",offset:100,repeat:false,invertBottomOffset:true,callbackFunction:function(h,g){},scrollHorizontal:false};a.extend(c,e);var b=this,f={height:a(window).height(),width:a(window).width()},d=((navigator.userAgent.toLowerCase().indexOf("webkit")!=-1||navigator.userAgent.toLowerCase().indexOf("windows phone")!=-1)?"body":"html");this.checkElements=function(){var h,g;if(!c.scrollHorizontal){h=a(d).scrollTop();g=(h+f.height)}else{h=a(d).scrollLeft();g=(h+f.width)}b.each(function(){var i=a(this),m={},j={};if(i.data("vp-add-class")){j.classToAdd=i.data("vp-add-class")}if(i.data("vp-remove-class")){j.classToRemove=i.data("vp-remove-class")}if(i.data("vp-offset")){j.offset=i.data("vp-offset")}if(i.data("vp-repeat")){j.repeat=i.data("vp-repeat")}if(i.data("vp-scrollHorizontal")){j.scrollHorizontal=i.data("vp-scrollHorizontal")}if(i.data("vp-invertBottomOffset")){j.scrollHorizontal=i.data("vp-invertBottomOffset")}a.extend(m,c);a.extend(m,j);if(i.hasClass(m.classToAdd)&&!m.repeat){return}if(String(m.offset).indexOf("%")>0){m.offset=(parseInt(m.offset)/100)*f.height}var l=(!m.scrollHorizontal)?Math.round(i.offset().top)+m.offset:Math.round(i.offset().left)+m.offset,k=(!m.scrollHorizontal)?l+i.height():l+i.width();if(m.invertBottomOffset){k-=(m.offset*2)}if((l<g)&&(k>h)){i.removeClass(m.classToRemove);i.addClass(m.classToAdd);m.callbackFunction(i,"add")}else{if(i.hasClass(m.classToAdd)&&(m.repeat)){i.removeClass(m.classToAdd);m.callbackFunction(i,"remove")}}})};if(!!("ontouchstart" in window)){a(document).bind("touchmove MSPointerMove pointermove",this.checkElements)}else{a(window).bind("scroll",this.checkElements)}a(window).bind("load",this.checkElements);a(window).resize(function(g){f={height:a(window).height(),width:a(window).width()};b.checkElements()});this.checkElements();return this}})(jQuery);